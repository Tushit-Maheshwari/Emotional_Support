<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Feelings Wheel Interactive</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      min-height: 100vh;
      background: linear-gradient(120deg, #fde8e4 0%, #e0e7ff 100%);
    }
    .wheel-image {
      width: 100%;
      max-width: 430px;
      user-select: none;
      border-radius: 50%;
      box-shadow: 0 10px 40px rgba(155,51,167,0.12);
      transition: box-shadow 0.2s;
      cursor: grab;
    }
    .wheel-image:active {
      box-shadow: 0 20px 60px rgba(155,51,167,0.18);
      cursor: grabbing;
    }
    @media (max-width: 768px) {
      main {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto auto;
        gap: 0.5rem;
      }
      .wheel-image {
        max-width: 90vw;
      }
    }
  </style>
</head>
<body>
  <main class="w-full min-h-screen grid grid-cols-2 gap-10 px-8 py-10 items-center bg-none">
    <!-- Left: Wheel -->
    <section class="flex flex-col items-center justify-center">
      <h1 class="text-3xl font-extrabold text-pink-700 mb-4 tracking-tight">Feelings Wheel</h1>
      <div class="relative w-full flex items-center justify-center">
        <img src="feelings-wheel-new-2.webp" id="feelingsWheel" class="wheel-image" alt="Feelings Wheel Image">
      </div>
      <p class="mt-6 text-center text-gray-700 max-w-xs">Rotate the wheel by dragging. Explore the spectrum of emotions and reflect.</p>
    </section>
    <!-- Right: Writing & Sharing -->
    <section class="flex flex-col items-center justify-center w-full">
      <label for="emotionsInput" class="text-xl font-semibold text-indigo-800 mb-3 block w-full text-center">Describe your emotions</label>
      <textarea id="emotionsInput" rows="6" placeholder="What are you feeling today?" class="w-5/6 md:w-4/6 rounded-xl border border-purple-200 p-4 text-lg bg-white shadow mb-5 focus:ring-2 focus:ring-pink-300 focus:outline-none resize-none"></textarea>
      <button id="shareBtn" class="bg-pink-600 text-white font-semibold px-8 py-3 rounded-xl shadow-xl hover:bg-pink-500 transition mb-5 w-2/3">Share Emotional Message</button>
      <div id="outputMsg" class="w-5/6 md:w-4/6 text-lg p-4 text-center mt-2 rounded-xl bg-pink-50 border border-pink-200 text-pink-700"></div>
    </section>
  </main>
  <script>
    // Wheel rotation logic
    const wheel = document.getElementById('feelingsWheel');
    let rotation = 0, startAngle = 0, isDragging = false;
    function getAngle(x, y, img) {
      const rect = img.getBoundingClientRect();
      const cx = rect.left + rect.width / 2;
      const cy = rect.top + rect.height / 2;
      return Math.atan2(y - cy, x - cx) * (180 / Math.PI);
    }
    wheel.addEventListener('mousedown', (e) => {
      isDragging = true;
      startAngle = getAngle(e.clientX, e.clientY, wheel) - rotation;
      wheel.style.transition = 'none';
    });
    window.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      rotation = getAngle(e.clientX, e.clientY, wheel) - startAngle;
      wheel.style.transform = `rotate(${rotation}deg)`;
    });
    window.addEventListener('mouseup', () => { isDragging = false; wheel.style.transition = ''; });
    wheel.addEventListener('touchstart', (e) => {
      if (e.touches.length !== 1) return;
      isDragging = true;
      startAngle = getAngle(e.touches[0].clientX, e.touches[0].clientY, wheel) - rotation;
      wheel.style.transition = 'none';
    });
    window.addEventListener('touchmove', (e) => {
      if (!isDragging || e.touches.length !== 1) return;
      rotation = getAngle(e.touches[0].clientX, e.touches[0].clientY, wheel) - startAngle;
      wheel.style.transform = `rotate(${rotation}deg)`;
    });
    window.addEventListener('touchend', () => { isDragging = false; wheel.style.transition = ''; });

    // Share button logic
    document.getElementById('shareBtn').onclick = function() {
      const text = document.getElementById('emotionsInput').value.trim();
      if (!text) {
        document.getElementById('outputMsg').innerHTML = "<span class='text-pink-600 font-bold'>Please describe your feelings first.</span>";
        return;
      }
      // Simple emotional intelligence formatting
      const message =
        `Today, I am experiencing: <b>${text}</b>.<br>` +
        `I honor my emotions and reflect on them with awareness.`;
      document.getElementById('outputMsg').innerHTML =
        `<span class='block px-4 py-2'>${message}</span>`;
    };
  </script>
</body>
</html>
